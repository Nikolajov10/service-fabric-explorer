<div class="detail-pane">
  <div data-cy="clustermap">
    <app-input placeholder="Filter nodes" [model]="filter" (changed)="filter = $event;"></app-input>

    <div style="margin: 15px; display: flex; gap: 10px;">
      <label>
        <app-health-badge [badgeClass]="'badge-ok'" [text]="'OK'"></app-health-badge>

        <app-toggle [(state)]="healthFilter.OK"></app-toggle>
      </label>

      <label>
        <app-health-badge [badgeClass]="'badge-warning'" [text]="'Warning'"></app-health-badge>
        <app-toggle [(state)]="healthFilter.Warning"></app-toggle>
      </label>

      <label>
        <app-health-badge [badgeClass]="'badge-error'" [text]="'Error'"></app-health-badge>
        <app-toggle [(state)]="healthFilter.Error"></app-toggle>
      </label>
    </div>

    <!-- (openChange)="closeChange($event)" -->
    <div ngbDropdown class="hidden-toggle"  container="body" display="dynamic">
      <button class="flat-button supress-hover" ngbDropdownToggle>node Types</button>
      <ul ngbDropdownMenu role="menu" style="list-style: none; padding: 5px; color: white; margin-bottom: 0px;">
        <li role="menuitem" *ngFor="let type of nodes.nodeTypes; let last = last;" class="item">
          <label style="margin-bottom: 0px; font-size: 15px;">
            <input type="checkbox" (click)=" $event.stopPropagation()" />
            <!-- [(ngModel)]="filterValue.isChecked" (ngModelChange)="updateList();" (keydown.tab)="last ? closeDropDown() : null" -->
            {{type}}
          </label>
        </li>
      </ul>
    </div>

    <div class="table-responsive" *ngIf="nodes.collection.length > 0 && matrix">
      <table class="table map-table" role="presentation">
        <tbody>
          <tr>
            <td class="legend" colspan="2" rowspan="2"></td>
            <td [colSpan]="nodes.faultDomains.length" class="legend">Fault Domain</td>
          </tr>
          <tr>
            <td *ngFor="let faultDomain of nodes.faultDomains" class="header top-side">
              <app-section-overview [nodes]="matrix[faultDomain]" [moreInfo]="false" [vertical]="false"
                [title]="faultDomain"></app-section-overview>

            </td>
          </tr>
          <tr *ngFor="let upgradeDomain of nodes.upgradeDomains; first as isFirst">
            <td class="legend" [rowSpan]="nodes.upgradeDomains.length" *ngIf="isFirst">Upgrade<br />Domain</td>
            <td class="header sticky left-side">
              <app-section-overview [nodes]="matrix[upgradeDomain]" [moreInfo]="false" [title]="upgradeDomain"
                [vertical]="true"></app-section-overview>
            </td>
            <td *ngFor="let faultDomain of nodes.faultDomains" style="color: white;">
              <div style="color: white;" *ngIf="matrix[faultDomain + upgradeDomain].length > 0">
                <app-status-tile [nodes]="matrix[faultDomain + upgradeDomain]"
                  [title]="faultDomain + ' : ' + upgradeDomain"></app-status-tile>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
